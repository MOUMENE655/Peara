<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Peara | ูููุน ุดุฎุตู</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
  <style>
    body { background: #f6f8fa; font-family: 'Cairo', sans-serif; }
    header { background: #2d3748; color: white; padding: 10px 0; }
    header h1 { font-size: 24px; margin: 0; }
    #login-btn, #logout-btn { margin-left: 15px; }
    section { padding: 60px 0; }
    .project-card { background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
  </style>
</head>
<body>
  <header class="d-flex justify-content-between align-items-center px-4">
    <h1>๐ Peara</h1>
    <div>
      <button id="login-btn" class="btn btn-success">ุชุณุฌูู ุงูุฏุฎูู</button>
      <button id="logout-btn" class="btn btn-danger d-none">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
    </div>
  </header>

  <main class="container">
    <section id="about">
      <h2>ูู ุฃูุง</h2>
      <p>ุฃูุง ูุทูุฑ ุดุบูู ุจุงูุจุฑูุฌุฉ ูุงูุฐูุงุก ุงูุงุตุทูุงุนู. ุฃุณุชุฎุฏู Peara ูุนุฑุถ ูุดุงุฑูุนู ูููุงุฑุงุชู.</p>
    </section>

    <section id="projects">
      <h2>ูุดุงุฑูุนู</h2>
      <div class="project-card">
        <h4>ูุดุฑูุน ุฐูุงุก ุงุตุทูุงุนู</h4>
        <p>ูุธุงู ูุชุตููู ุงูุตูุฑ ุจุงุณุชุฎุฏุงู ุงูุดุจูุงุช ุงูุนุตุจูุฉ.</p>
      </div>
      <div class="project-card">
        <h4>ูุนุจุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ</h4>
        <p>ูุนุจุฉ ูุบุงูุฑุงุช ูุทูุฑุฉ ุจูุญุฑู Godot.</p>
      </div>
    </section>

    <section id="contact">
      <h2>ุชูุงุตู ูุนู</h2>
      <form id="contact-form" action="https://formspree.io/f/xvgwbdan" method="POST" class="w-75">
        <input type="email" name="email" placeholder="ุจุฑูุฏู ุงูุฅููุชุฑููู" class="form-control mb-2" required>
        <textarea name="message" placeholder="ุฑุณุงูุชู..." class="form-control mb-2" required></textarea>
        <button type="submit" class="btn btn-primary">ุฅุฑุณุงู</button>
      </form>
      <p id="sent-msg" class="text-success mt-3 d-none">ุชู ุงูุฅุฑุณุงู ุจูุฌุงุญ โ</p>
    </section>
  </main>

  <script>
    let auth0Client = null;
    const domain = "dev-cpi8o3elw1o1xe1m.us.auth0.com";
    const clientId = "7KovmuJ1lp4OlcLB8KnRgSto9G4Usgd9";

    async function initAuth0() {
      auth0Client = await createAuth0Client({
        domain,
        client_id: clientId,
        cacheLocation: "localstorage"
      });

      const query = window.location.search;
      if (query.includes("code=") && query.includes("state=")) {
        await auth0Client.handleRedirectCallback();
        window.history.replaceState({}, document.title, "/Peara/");
      }

      const isAuthenticated = await auth0Client.isAuthenticated();
      document.getElementById("login-btn").classList.toggle("d-none", isAuthenticated);
      document.getElementById("logout-btn").classList.toggle("d-none", !isAuthenticated);
      document.getElementById("contact").style.display = isAuthenticated ? "block" : "none";
    }

    document.getElementById("login-btn").onclick = async () => {
      await auth0Client.loginWithRedirect({ authorizationParams: { redirect_uri: window.location.href } });
    };

    document.getElementById("logout-btn").onclick = () => {
      auth0Client.logout({ logoutParams: { returnTo: "https://moumene655.github.io/Peara/" } });
    };

    document.getElementById("contact-form").onsubmit = () => {
      document.getElementById("sent-msg").classList.remove("d-none");
    };

    initAuth0();
  </script>
</body>
</html>
